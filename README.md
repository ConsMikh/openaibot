# Порядок развертывания бота
1. Настроить бота телеграм, получить его токен

Для этого в Telegram существует специальный бот — @BotFather. Пишем ему /start и получаем список всех его команд. Первая и главная — /newbot — отправляем ему и бот просит придумать имя нашему новому боту. Единственное ограничение на имя — оно должно оканчиваться на «bot». В случае успеха BotFather возвращает токен бота.

2. Получить доступ к API OpenAI
   
Самая сложная часть, так доступ к API с территории России заблокирован. Можно воспользоваться инстукциями

[Как оплатить ChatGPT](https://dzen.ru/a/ZBmbwIEH5UfGiHbR)

[Покупка виртуальных карт](https://wanttopay.net/)

3. Настроить VDS

VDS должен иметь НЕроссийкий IP-адрес. Иначе запросы бота будут блокироваться. Для личного использования достаточно минимально возможных системных требований (1 ядро, 1 Гб оперативной памяти)

4. Установить на VDS Docker и Git

[Инструкция по установке Docker](https://docs.docker.com/engine/install/)

[Инструкция по установке Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)

5. Создать папку для работы бота и перейти в нее
   
6. Клонировать репозиторий в папку
```
$ git clone https://github.com/ConsMikh/openaibot.git
```

7. Перейти в папку openaibot/docker и создать файл .env. В этот файл надо записать токены телеграм бота из шага 1 и api open ai из шага 2
```
$ cd openaibot/docker
$ nano .env
 ```
OPENAI_API_KEY=[ключ к API Open-AI]

OPENAI_CHAT_BOT=[ключ для доступа к боту телеграм]

Для сохранения выполнить Ctrl+O, Enter, Ctrl+X

8. Для запуска бота выполнить команду
```
$ docker compose up -d
```

# Команды, используемые при работе бота
**/clear** - очистить сессию (остается только системный промт)

**/model** - выбрать модель для сессии. Считается, что все перечисленные модели доступны по api

Если модель недоступна в перечне моделей в личном кабинете api open ai, то выбирать ее бесполезно

**/context** - выбрать режим работы с контекстом<br>Доступны два режима:
- сбрасывать контекст - режим подойдет для простых вопросов (например, перевод фразы с одного языка на другой), перед следующим вопросом контекст удалится и останется только системный промт
- накапливать контекст - режим подойдет для беседы, когда важно, чтобы модель запоминала ранее выданные ответы
  
**/system [текст]** - поменять системный промт на [текст] (сессия будет очищена)

**/session** - вывести информацию о сессии

**/t, /т, /tokens** - вывести количество токенов в текущей сессии

[История версий](https://github.com/ConsMikh/openaibot/blob/main/docs/Version_history.md)

[Misc](https://github.com/ConsMikh/openaibot/blob/main/docs/Misc.md)

